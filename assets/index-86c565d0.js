import{v as y,d as $,p as i,q as z,x as X,r as n,o as h,c as V,g as o,w as a,h as x,b as f,a as Y,u as m,f as Z,F as ee,E as v,_ as oe}from"./index-186e0fed.js";import{t as te}from"./index-e5869d59.js";const k="/api-two";function le(d,r){const u=`${k}/admin/product/baseTrademark/${d}/${r}`;return y({url:u,method:"get"})}function ae(d){const r=`${k}/admin/product/baseTrademark/${d.id?"update":"save"}`;return y({url:r,method:d.id?"put":"post",data:d})}function ne(d){const r=`${k}/admin/product/baseTrademark/remove/${d}`;return y({url:r,method:"delete"})}const re=["src"],se={class:"dialog-footer"},de=$({name:"TrademarkIndex"}),ce=$({...de,setup(d){const r=i(1),u=i(10),C=i(0),U=i(),T=e=>{console.log(`每页 ${e} 条`),r.value=1,u.value=e,p()},F=e=>{console.log(`当前页: ${e}`),r.value=e,p()},p=()=>{le(r.value,u.value).then(e=>{var l;U.value=(l=e.data)==null?void 0:l.records,u.value=e.data.size,r.value=e.data.current,C.value=e.data.total,te()})},c=i(!1);let t=z({tmName:"",logoUrl:"",id:0});const L=z({tmName:[{required:!0,message:"请输入品牌名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],logoUrl:[{required:!0,message:"请上传品牌LOGO",trigger:["blur","change"]}]}),O=()=>{c.value=!0,console.log("新增品牌")},B=e=>{console.log("编辑品牌",e),t.tmName=e.tmName,t.logoUrl=e.logoUrl,t.id=e.id,c.value=!0},M=e=>{ne(e.id).then(l=>{l.code===200?(v.success(l.msg??"操作成功"),p()):v.error(l.msg)}),console.log("删除品牌",e.id)},S=e=>{t.logoUrl=e.data,b.value.clearValidate("logoUrl")},q=e=>e.type!=="image/jpeg"?(v.error("Avatar picture must be JPG format!"),!1):e.size/1024/1024>2?(v.error("Avatar picture size can not exceed 2MB!"),!1):!0,b=i(),w=()=>{b.value.validate(e=>{if(e)console.log("ruleForm😊===》",t),c.value=!1,ae(t).then(l=>{console.log("res😊===》",l),l.code===200&&p()});else return console.log("error submit!!"),!1})},A=()=>{c.value=!1,t.tmName="",t.logoUrl="",t.id=0,console.log("handleClose ruleForm😊===》",t)};return X(()=>{console.log("商标管理onMounted"),p()}),(e,l)=>{const _=n("el-button"),g=n("el-table-column"),G=n("el-image"),P=n("el-popconfirm"),E=n("el-table"),j=n("el-pagination"),I=n("el-card"),R=n("el-input"),N=n("el-form-item"),D=n("Plus"),J=n("el-icon"),W=n("el-upload"),H=n("el-form"),K=n("el-dialog");return h(),V(ee,null,[o(I,{class:"box-card"},{default:a(()=>[o(_,{type:"primary",icon:"plus",onClick:O},{default:a(()=>[x(" 添加品牌 ")]),_:1}),f('    <el-button type="primary" icon="plus" @click="getList10()">'),f("      getList"),f("    </el-button>"),o(E,{data:U.value,style:{width:"100%",margin:"10px 0"},border:""},{default:a(()=>[o(g,{type:"index",label:"序号",width:"140",align:"center"}),o(g,{prop:"tmName",label:"品牌名称"}),o(g,{prop:"logoUrl",label:"品牌LOGO"},{default:a(({row:s})=>[o(G,{style:{width:"100px",height:"100px"},src:s.logoUrl.startsWith("http")?s.logoUrl:"http://"+s.logoUrl,fit:"contain"},null,8,["src"])]),_:1}),o(g,{prop:"name",label:"品牌操作"},{default:a(({row:s})=>[o(_,{type:"primary",size:"default",icon:"edit",onClick:Q=>B(s)},null,8,["onClick"]),o(P,{title:"是否确认删除?",onConfirm:Q=>M(s)},{reference:a(()=>[o(_,{type:"danger",size:"default",icon:"delete"})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),o(j,{onSizeChange:T,onCurrentChange:F,"current-page":r.value,"page-sizes":[10,20,30,40],"page-size":u.value,background:"",layout:"total,prev, pager,next,->,sizes, jumper",total:C.value},null,8,["current-page","page-size","total"])]),_:1}),f("  对话框"),o(K,{modelValue:c.value,"onUpdate:modelValue":l[2]||(l[2]=s=>c.value=s),title:m(t).id?"编辑品牌":"新增品牌",width:"30%",closeable:"","destroy-on-close":"",onClose:A},{footer:a(()=>[Y("span",se,[o(_,{onClick:l[1]||(l[1]=s=>c.value=!1)},{default:a(()=>[x("取消")]),_:1}),o(_,{type:"primary",onClick:w},{default:a(()=>[x("确认")]),_:1})])]),default:a(()=>[o(H,{ref_key:"ruleFormRef",ref:b,model:m(t),rules:L,"label-width":"120px",class:"demo-ruleForm","status-icon":""},{default:a(()=>[o(N,{label:"品牌名称",prop:"tmName"},{default:a(()=>[o(R,{modelValue:m(t).tmName,"onUpdate:modelValue":l[0]||(l[0]=s=>m(t).tmName=s)},null,8,["modelValue"])]),_:1}),o(N,{label:"品牌LOGO",prop:"logoUrl"},{default:a(()=>[o(W,{class:"avatar-uploader",action:"api/api-two/http://139.198.104.58:8209/admin/product/fileUpload","show-file-list":!1,"on-success":S,"before-upload":q},{default:a(()=>[m(t).logoUrl?(h(),V("img",{key:0,src:m(t).logoUrl,class:"avatar",alt:""},null,8,re)):(h(),Z(J,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[o(D)]),_:1}))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])],64)}}});const me=oe(ce,[["__scopeId","data-v-693ad49d"],["__file","F:/code/david_harem_admin/src/views/product/trademark/index.vue"]]);export{me as default};
