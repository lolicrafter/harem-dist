import{d as h,A as P,p as U,r,o as f,c as b,g as e,w as t,B as C,C as N,u as i,a as x,h as m,F as k,e as $,D as F,E as p,G as J,f as j,t as z,b as G,_ as M}from"./index-186e0fed.js";const q=h({name:"AttrIndex"}),H=h({...q,setup(K){const n=P(),v=l=>{n.isTableReadonly=!1,a.value=JSON.parse(JSON.stringify(l)),console.log(l)},L=()=>{n.isTableReadonly=!1,a.value=Object.assign({},{attrName:"",categoryId:n.cateId3,categoryLevel:3,attrValueList:[]})},A=l=>{F(l).then(()=>{p.success("删除成功"),n.getAttrTableData()})},y=()=>{n.isTableReadonly=!0};let a=U({attrName:"",categoryId:0,categoryLevel:0,attrValueList:[]});const D=()=>{var l,c;(c=(l=a.value)==null?void 0:l.attrValueList)==null||c.push({valueName:""})},T=()=>{var l,c;if(((l=a.value.attrValueList)==null?void 0:l.length)===0){p.error("请添加属性值");return}for(let _=0;_<a.value.attrValueList.length;_++)if(!((c=a.value.attrValueList)!=null&&c[_].valueName)){p.error("请填写属性值");return}if(!a.value.attrName){p.error("请填写属性名称");return}J(a.value).then(()=>{p.success("操作成功"),n.getAttrTableData(),y()})},w=l=>{a.value.attrValueList.splice(l,1)};return(l,c)=>{const _=r("ProductCategory"),s=r("el-button"),u=r("el-table-column"),E=r("el-tag"),I=r("el-popconfirm"),g=r("el-table"),V=r("el-input"),S=r("el-form-item"),B=r("el-form"),R=r("el-card");return f(),b("div",null,[e(_),e(R,{class:"footer-card"},{default:t(()=>[C(x("div",null,[e(s,{type:"primary",icon:"Plus",style:{"margin-bottom":"10px"},disabled:!i(n).cateId3,onClick:L},{default:t(()=>[m(" 添加属性 ")]),_:1},8,["disabled"]),e(g,{data:i(n).attrTableData,border:"",style:{width:"100%"}},{default:t(()=>[e(u,{type:"index",label:"序号",width:"180"}),e(u,{prop:"attrName",label:"属性名称"}),e(u,{prop:"date",label:"属性值名称"},{default:t(({row:o})=>[(f(!0),b(k,null,$(o.attrValueList,d=>(f(),b(k,{key:d.id},[d.valueName?(f(),j(E,{key:0,style:{margin:"5px"}},{default:t(()=>[m(z(d.valueName),1)]),_:2},1024)):G("v-if",!0)],64))),128))]),_:1}),e(u,{label:"操作"},{default:t(({row:o})=>[e(s,{type:"primary",icon:"Edit",onClick:d=>v(o)},null,8,["onClick"]),e(I,{title:"是否确认删除?",onConfirm:d=>A(o.id)},{reference:t(()=>[e(s,{type:"danger",size:"default",icon:"delete"})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"])],512),[[N,i(n).isTableReadonly]]),C(x("div",null,[e(B,{inline:"",model:i(a)},{default:t(()=>[e(S,{label:"当前属性名称",prop:"attrName"},{default:t(()=>[e(V,{placeholder:"属性名称",modelValue:i(a).attrName,"onUpdate:modelValue":c[0]||(c[0]=o=>i(a).attrName=o)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"]),e(s,{type:"primary",icon:"Plus",style:{"margin-bottom":"10px"},disabled:!i(a).attrName,onClick:D},{default:t(()=>[m(" 添加属性值 ")]),_:1},8,["disabled"]),e(s,{style:{"margin-bottom":"10px"},onClick:y},{default:t(()=>[m("取消")]),_:1}),e(g,{data:i(a).attrValueList,border:"",style:{width:"100%"}},{default:t(()=>[e(u,{type:"index",label:"序号",width:"180"}),e(u,{prop:"valueName",label:"属性值名称"},{default:t(({row:o})=>[e(V,{placeholder:"属性值名称",modelValue:o.valueName,"onUpdate:modelValue":d=>o.valueName=d,autofocus:""},null,8,["modelValue","onUpdate:modelValue"])]),_:1}),e(u,{label:"操作"},{default:t(({row:o,$index:d})=>[e(s,{type:"primary",icon:"Edit",onClick:O=>v(o)},null,8,["onClick"]),e(s,{type:"danger",icon:"Delete",onClick:O=>w(d)},null,8,["onClick"])]),_:1})]),_:1},8,["data"]),e(s,{type:"primary",style:{"margin-bottom":"10px"},onClick:T},{default:t(()=>[m(" 保存 ")]),_:1}),e(s,{style:{"margin-bottom":"10px"},onClick:y},{default:t(()=>[m("取消")]),_:1})],512),[[N,!i(n).isTableReadonly]])]),_:1})])}}});const W=M(H,[["__scopeId","data-v-178899f0"],["__file","F:/code/david_harem_admin/src/views/product/attribute/index.vue"]]);export{W as default};
