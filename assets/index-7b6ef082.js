import{v as x,d as N,p as i,q as T,x as Q,r as n,o as b,c as z,g as o,w as a,h,a as X,u as m,f as Y,F as Z,E as f,_ as ee}from"./index-1c3f08d8.js";import{t as oe}from"./index-635b6915.js";const y={}.VITE_APP_BASE_API_TWO;function te(c,r){const d=`${y}/admin/product/baseTrademark/${c}/${r}`;return x({url:d,method:"get"})}function le(c){const r=`${y}/admin/product/baseTrademark/${c.id?"update":"save"}`;return x({url:r,method:c.id?"put":"post",data:c})}function ae(c){const r=`${y}/admin/product/baseTrademark/remove/${c}`;return x({url:r,method:"delete"})}const ne=["src"],re={class:"dialog-footer"},se=N({name:"TrademarkIndex"}),ce=N({...se,setup(c){const r=i(1),d=i(10),k=i(0),C=i(),V=e=>{console.log(`每页 ${e} 条`),r.value=1,d.value=e,p()},$=e=>{console.log(`当前页: ${e}`),r.value=e,p()},p=()=>{te(r.value,d.value).then(e=>{var l;C.value=(l=e.data)==null?void 0:l.records,d.value=e.data.size,r.value=e.data.current,k.value=e.data.total,oe()})},u=i(!1);let t=T({tmName:"",logoUrl:"",id:0});const F=T({tmName:[{required:!0,message:"请输入品牌名称",trigger:"blur"},{min:2,max:20,message:"长度在 2 到 20 个字符",trigger:"blur"}],logoUrl:[{required:!0,message:"请上传品牌LOGO",trigger:["blur","change"]}]}),O=()=>{u.value=!0,console.log("新增品牌")},A=e=>{console.log("编辑品牌",e),t.tmName=e.tmName,t.logoUrl=e.logoUrl,t.id=e.id,u.value=!0},P=e=>{ae(e.id).then(l=>{l.code===200?(f.success(l.msg??"操作成功"),p()):f.error(l.msg)}),console.log("删除品牌",e.id)},B=e=>{t.logoUrl=e.data,v.value.clearValidate("logoUrl")},S=e=>e.type!=="image/jpeg"?(f.error("Avatar picture must be JPG format!"),!1):e.size/1024/1024>2?(f.error("Avatar picture size can not exceed 2MB!"),!1):!0,v=i(),E=()=>{v.value.validate(e=>{if(e)console.log("ruleForm😊===》",t),u.value=!1,le(t).then(l=>{console.log("res😊===》",l),l.code===200&&p()});else return console.log("error submit!!"),!1})},L=()=>{u.value=!1,t.tmName="",t.logoUrl="",t.id=0,console.log("handleClose ruleForm😊===》",t)};return Q(()=>{console.log("商标管理onMounted"),p()}),(e,l)=>{const _=n("el-button"),g=n("el-table-column"),M=n("el-image"),q=n("el-popconfirm"),G=n("el-table"),I=n("el-pagination"),j=n("el-card"),w=n("el-input"),U=n("el-form-item"),R=n("Plus"),W=n("el-icon"),D=n("el-upload"),J=n("el-form"),H=n("el-dialog");return b(),z(Z,null,[o(j,{class:"box-card"},{default:a(()=>[o(_,{type:"primary",icon:"plus",onClick:O},{default:a(()=>[h(" 添加品牌 ")]),_:1}),o(G,{data:C.value,style:{width:"100%",margin:"10px 0"},border:""},{default:a(()=>[o(g,{type:"index",label:"序号",width:"140",align:"center"}),o(g,{prop:"tmName",label:"品牌名称"}),o(g,{prop:"logoUrl",label:"品牌LOGO"},{default:a(({row:s})=>[o(M,{style:{width:"100px",height:"100px"},src:s.logoUrl.startsWith("http")?s.logoUrl:"http://"+s.logoUrl,fit:"contain"},null,8,["src"])]),_:1}),o(g,{prop:"name",label:"品牌操作"},{default:a(({row:s})=>[o(_,{type:"primary",size:"default",icon:"edit",onClick:K=>A(s)},null,8,["onClick"]),o(q,{title:"是否确认删除?",onConfirm:K=>P(s)},{reference:a(()=>[o(_,{type:"danger",size:"default",icon:"delete"})]),_:2},1032,["onConfirm"])]),_:1})]),_:1},8,["data"]),o(I,{onSizeChange:V,onCurrentChange:$,"current-page":r.value,"page-sizes":[10,20,30,40],"page-size":d.value,background:"",layout:"total,prev, pager,next,->,sizes, jumper",total:k.value},null,8,["current-page","page-size","total"])]),_:1}),o(H,{modelValue:u.value,"onUpdate:modelValue":l[2]||(l[2]=s=>u.value=s),title:m(t).id?"编辑品牌":"新增品牌",width:"30%",closeable:"","destroy-on-close":"",onClose:L},{footer:a(()=>[X("span",re,[o(_,{onClick:l[1]||(l[1]=s=>u.value=!1)},{default:a(()=>[h("取消")]),_:1}),o(_,{type:"primary",onClick:E},{default:a(()=>[h("确认")]),_:1})])]),default:a(()=>[o(J,{ref_key:"ruleFormRef",ref:v,model:m(t),rules:F,"label-width":"120px",class:"demo-ruleForm","status-icon":""},{default:a(()=>[o(U,{label:"品牌名称",prop:"tmName"},{default:a(()=>[o(w,{modelValue:m(t).tmName,"onUpdate:modelValue":l[0]||(l[0]=s=>m(t).tmName=s)},null,8,["modelValue"])]),_:1}),o(U,{label:"品牌LOGO",prop:"logoUrl"},{default:a(()=>[o(D,{class:"avatar-uploader",action:"api/api-two/http://139.198.104.58:8209/admin/product/fileUpload","show-file-list":!1,"on-success":B,"before-upload":S},{default:a(()=>[m(t).logoUrl?(b(),z("img",{key:0,src:m(t).logoUrl,class:"avatar",alt:""},null,8,ne)):(b(),Y(W,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[o(R)]),_:1}))]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])],64)}}});const ie=ee(ce,[["__scopeId","data-v-f4f958a7"]]);export{ie as default};
